{"remainingRequest":"D:\\Microsoft VS Code\\vs code\\软件项目管理\\大实例\\前后端源码\\front\\node_modules\\babel-loader\\lib\\index.js!D:\\Microsoft VS Code\\vs code\\软件项目管理\\大实例\\前后端源码\\front\\src\\store\\modules\\user.js","dependencies":[{"path":"D:\\Microsoft VS Code\\vs code\\软件项目管理\\大实例\\前后端源码\\front\\src\\store\\modules\\user.js","mtime":1741681638857},{"path":"D:\\Microsoft VS Code\\vs code\\软件项目管理\\大实例\\前后端源码\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Microsoft VS Code\\vs code\\软件项目管理\\大实例\\前后端源码\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDovTWljcm9zb2Z0IFZTIENvZGUvdnMgY29kZS9cdThGNkZcdTRFRjZcdTk4NzlcdTc2RUVcdTdCQTFcdTc0MDYvXHU1OTI3XHU1QjlFXHU0RjhCL1x1NTI0RFx1NTQwRVx1N0FFRlx1NkU5MFx1NzgwMS9mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCB1c2VyQVBJIGZyb20gJ0AvYXBpL3VzZXInOwppbXBvcnQgeyBzZXRUb2tlbiwgcmVtb3ZlVG9rZW4gfSBmcm9tICdAL3V0aWxzL2F1dGgnOwppbXBvcnQgcm91dGVyLCB7IHJlc2V0Um91dGVyIH0gZnJvbSAnQC9yb3V0ZXInOwp2YXIgc3RhdGUgPSB7CiAgdXNlckluZm86IHt9LAogIHJvbGVzOiBbXSwKICBjb250ZXN0VHlwZXM6IFtdCn07CnZhciBtdXRhdGlvbnMgPSB7CiAgU0VUX1RPS0VOOiBmdW5jdGlvbiBTRVRfVE9LRU4oc3RhdGUsIHRva2VuKSB7CiAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogIH0sCiAgU0VUX1VTRVJJTkZPOiBmdW5jdGlvbiBTRVRfVVNFUklORk8oc3RhdGUsIHVzZXJJbmZvKSB7CiAgICBzdGF0ZS51c2VySW5mbyA9IHVzZXJJbmZvOwogIH0sCiAgU0VUX1JPTEVTOiBmdW5jdGlvbiBTRVRfUk9MRVMoc3RhdGUsIHJvbGVzKSB7CiAgICBzdGF0ZS5yb2xlcyA9IHJvbGVzOwogIH0sCiAgU0VUX0NPTlRFU1RUWVBFUzogZnVuY3Rpb24gU0VUX0NPTlRFU1RUWVBFUyhzdGF0ZSwgdHlwZXMpIHsKICAgIHN0YXRlLmNvbnRlc3RUeXBlcyA9IHR5cGVzOwogIH0KfTsKdmFyIGFjdGlvbnMgPSB7CiAgLy8g55So5oi355m75b2VCiAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYsIHVzZXJJbmZvKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICB1c2VySW5mby5hY2NvdW50ID0gdXNlckluZm8uYWNjb3VudC50cmltKCk7CiAgICB1c2VySW5mby5wYXNzd29yZCA9IHVzZXJJbmZvLnBhc3N3b3JkLnRyaW0oKTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHVzZXJBUEkubG9naW4odXNlckluZm8pLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICB2YXIgdG9rZW4gPSByZXNwLmRhdGE7CiAgICAgICAgc2V0VG9rZW4odG9rZW4pOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIOiOt+WPlueUqOaIt+S/oeaBrwogIGdldFVzZXJJbmZvOiBmdW5jdGlvbiBnZXRVc2VySW5mbyhfcmVmMikgewogICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdCwKICAgICAgICBkaXNwYXRjaCA9IF9yZWYyLmRpc3BhdGNoOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdXNlckFQSS5nZXRVc2VySW5mbygpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmICghcmVzLmRhdGEpIHsKICAgICAgICAgIHJlamVjdCgn6aqM6K+B5aSx6LSl77yM6K+36YeN5paw55m75b2VJyk7CiAgICAgICAgfSAvLyDkuLvpopjoibLkuLrnqbrnmoTmm7TmlLkKCgogICAgICAgIHJlcy5kYXRhLnVzZXJJbmZvLnRoZW1lQ29sb3IgPyAnJyA6IHJlcy5kYXRhLnVzZXJJbmZvLnRoZW1lQ29sb3IgPSAnIzAwOTE0MCc7CiAgICAgICAgY29tbWl0KCdTRVRfVVNFUklORk8nLCByZXMuZGF0YS51c2VySW5mbyk7CiAgICAgICAgY29tbWl0KCdTRVRfUk9MRVMnLCByZXMuZGF0YS5yb2xlcyk7CiAgICAgICAgY29tbWl0KCdTRVRfQ09OVEVTVFRZUEVTJywgcmVzLmRhdGEuY29udGVzdFR5cGVzKTsKICAgICAgICByZXNvbHZlKHJlcy5kYXRhKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIOeUqOaIt+eZu+WHugogIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KF9yZWYzKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGUsCiAgICAgICAgZGlzcGF0Y2ggPSBfcmVmMy5kaXNwYXRjaDsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHVzZXJBUEkubG9nb3V0KCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgY29tbWl0KCdTRVRfVVNFUklORk8nLCB7fSk7CiAgICAgICAgY29tbWl0KCdTRVRfUk9MRVMnLCBbXSk7CiAgICAgICAgY29tbWl0KCdTRVRfQ09OVEVTVFRZUEVTJywgW10pOwogICAgICAgIHJlbW92ZVRva2VuKCk7CiAgICAgICAgcmVzZXRSb3V0ZXIoKTsgLy8gcmVzZXQgdmlzaXRlZCB2aWV3cyBhbmQgY2FjaGVkIHZpZXdzCgogICAgICAgIGRpc3BhdGNoKCd0YWdzVmlldy9kZWxBbGxWaWV3cycsIG51bGwsIHsKICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICB9KTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICAvLyDliKDpmaQgdG9rZW4gcm9sZXMKICByZXNldFRva2VuOiBmdW5jdGlvbiByZXNldFRva2VuKF9yZWY0KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgIGNvbW1pdCgnU0VUX1JPTEVTJywgW10pOwogICAgICByZW1vdmVUb2tlbigpOwogICAgICByZXNvbHZlKCk7CiAgICB9KTsKICB9LAogIC8vIOabtOaWsOeUqOaIt+S/oeaBrwogIHVwZGF0ZVVzZXJJbmZvOiBmdW5jdGlvbiB1cGRhdGVVc2VySW5mbyhfcmVmNSwgdXNlckluZm8pIHsKICAgIHZhciBjb21taXQgPSBfcmVmNS5jb21taXQ7CiAgICByZXR1cm4gY29tbWl0KCdTRVRfVVNFUklORk8nLCB1c2VySW5mbyk7CiAgfSwKICAvLyDliqjmgIHnvJbovpHmnYPpmZAKICBjaGFuZ2VSb2xlczogZnVuY3Rpb24gY2hhbmdlUm9sZXMoX3JlZjYsIHJvbGUpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBjb21taXQsIGRpc3BhdGNoLCBfeWllbGQkZGlzcGF0Y2gsIHJvbGVzLCBhY2Nlc3NSb3V0ZXM7CgogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjYuY29tbWl0LCBkaXNwYXRjaCA9IF9yZWY2LmRpc3BhdGNoOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnZ2V0VXNlckluZm8nKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBfeWllbGQkZGlzcGF0Y2ggPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIHJvbGVzID0gX3lpZWxkJGRpc3BhdGNoLnJvbGVzOwogICAgICAgICAgICAgIHJlc2V0Um91dGVyKCk7IC8vIGdlbmVyYXRlIGFjY2Vzc2libGUgcm91dGVzIG1hcCBiYXNlZCBvbiByb2xlcwoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ3Blcm1pc3Npb24vZ2VuZXJhdGVSb3V0ZXMnLCByb2xlcywgewogICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIGFjY2Vzc1JvdXRlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgLy8gZHluYW1pY2FsbHkgYWRkIGFjY2Vzc2libGUgcm91dGVzCiAgICAgICAgICAgICAgcm91dGVyLmFkZFJvdXRlcyhhY2Nlc3NSb3V0ZXMpOyAvLyByZXNldCB2aXNpdGVkIHZpZXdzIGFuZCBjYWNoZWQgdmlld3MKCiAgICAgICAgICAgICAgZGlzcGF0Y2goJ3RhZ3NWaWV3L2RlbEFsbFZpZXdzJywgbnVsbCwgewogICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBhY3Rpb25zOiBhY3Rpb25zCn07"},{"version":3,"sources":["D:/Microsoft VS Code/vs code/软件项目管理/大实例/前后端源码/front/src/store/modules/user.js"],"names":["userAPI","setToken","removeToken","router","resetRouter","state","userInfo","roles","contestTypes","mutations","SET_TOKEN","token","SET_USERINFO","SET_ROLES","SET_CONTESTTYPES","types","actions","login","commit","account","trim","password","Promise","resolve","reject","then","resp","data","catch","error","getUserInfo","dispatch","res","themeColor","logout","root","resetToken","updateUserInfo","changeRoles","role","accessRoutes","addRoutes","namespaced"],"mappings":"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","sourcesContent":["import userAPI from '@/api/user'\r\nimport { setToken, removeToken } from '@/utils/auth'\r\nimport router, { resetRouter } from '@/router'\r\n\r\nconst state = {\r\n  userInfo: {},\r\n  roles: [],\r\n  contestTypes: []\r\n}\r\n\r\nconst mutations = {\r\n  SET_TOKEN: (state, token) => {\r\n    state.token = token\r\n  },\r\n  SET_USERINFO: (state, userInfo) => {\r\n    state.userInfo = userInfo\r\n  },\r\n  SET_ROLES: (state, roles) => {\r\n    state.roles = roles\r\n  },\r\n  SET_CONTESTTYPES: (state, types) => {\r\n    state.contestTypes = types\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  // 用户登录\r\n  login({ commit }, userInfo) {\r\n    userInfo.account = userInfo.account.trim()\r\n    userInfo.password = userInfo.password.trim()\r\n    return new Promise((resolve, reject) => {\r\n      userAPI.login(userInfo).then(resp => {\r\n        const token = resp.data\r\n        setToken(token)\r\n        resolve()\r\n      }).catch(error => {\r\n        reject(error)\r\n      })\r\n    })\r\n  },\r\n  // 获取用户信息\r\n  getUserInfo({ commit, dispatch }) {\r\n    return new Promise((resolve, reject) => {\r\n      userAPI.getUserInfo().then(res => {\r\n        if (!res.data) {\r\n          reject('验证失败，请重新登录')\r\n        }\r\n        // 主题色为空的更改\r\n        res.data.userInfo.themeColor ? '' : res.data.userInfo.themeColor = '#009140'\r\n        commit('SET_USERINFO', res.data.userInfo)\r\n        commit('SET_ROLES', res.data.roles)\r\n        commit('SET_CONTESTTYPES', res.data.contestTypes)\r\n        resolve(res.data)\r\n      }).catch(error => {\r\n        reject(error)\r\n      })\r\n    })\r\n  },\r\n\r\n  // 用户登出\r\n  logout({ commit, state, dispatch }) {\r\n    return new Promise((resolve, reject) => {\r\n      userAPI.logout().then(() => {\r\n        commit('SET_USERINFO', {})\r\n        commit('SET_ROLES', [])\r\n        commit('SET_CONTESTTYPES', [])\r\n        removeToken()\r\n        resetRouter()\r\n        // reset visited views and cached views\r\n        dispatch('tagsView/delAllViews', null, { root: true })\r\n\r\n        resolve()\r\n      }).catch(error => {\r\n        reject(error)\r\n      })\r\n    })\r\n  },\r\n\r\n  // 删除 token roles\r\n  resetToken({ commit }) {\r\n    return new Promise(resolve => {\r\n      commit('SET_ROLES', [])\r\n      removeToken()\r\n      resolve()\r\n    })\r\n  },\r\n\r\n  // 更新用户信息\r\n  updateUserInfo({ commit }, userInfo) {\r\n    return commit('SET_USERINFO', userInfo)\r\n  },\r\n\r\n  // 动态编辑权限\r\n  async changeRoles({ commit, dispatch }, role) {\r\n    // const token = role + '-token'\r\n    // commit('SET_TOKEN', token)\r\n    // setToken(token)\r\n\r\n    const { roles } = await dispatch('getUserInfo')\r\n    resetRouter()\r\n    // generate accessible routes map based on roles\r\n    const accessRoutes = await dispatch('permission/generateRoutes', roles, { root: true })\r\n    // dynamically add accessible routes\r\n    router.addRoutes(accessRoutes)\r\n\r\n    // reset visited views and cached views\r\n    dispatch('tagsView/delAllViews', null, { root: true })\r\n  }\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  actions\r\n}\r\n\r\n"]}]}