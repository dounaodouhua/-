{"remainingRequest":"D:\\Microsoft VS Code\\vs code\\软件项目管理\\大实例\\前后端源码\\front\\node_modules\\babel-loader\\lib\\index.js!D:\\Microsoft VS Code\\vs code\\软件项目管理\\大实例\\前后端源码\\front\\src\\directive\\el-table\\adaptive.js","dependencies":[{"path":"D:\\Microsoft VS Code\\vs code\\软件项目管理\\大实例\\前后端源码\\front\\src\\directive\\el-table\\adaptive.js","mtime":1741681638635},{"path":"D:\\Microsoft VS Code\\vs code\\软件项目管理\\大实例\\前后端源码\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Microsoft VS Code\\vs code\\软件项目管理\\大实例\\前后端源码\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJEOi9NaWNyb3NvZnQgVlMgQ29kZS92cyBjb2RlL1x1OEY2Rlx1NEVGNlx1OTg3OVx1NzZFRVx1N0JBMVx1NzQwNi9cdTU5MjdcdTVCOUVcdTRGOEIvXHU1MjREXHU1NDBFXHU3QUVGXHU2RTkwXHU3ODAxL2Zyb250L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKCi8vIGJpbmTvvJrlj6rosIPnlKjkuIDmrKHvvIzmjIfku6TnrKzkuIDmrKHnu5HlrprliLDlhYPntKDml7bosIPnlKjjgILlnKjov5nph4zlj6/ku6Xov5vooYzkuIDmrKHmgKfnmoTliJ3lp4vljJborr7nva7jgIIKLy8gaW5zZXJ0ZWTvvJrooqvnu5HlrprlhYPntKDmj5LlhaXniLboioLngrnml7bosIPnlKggKOS7heS/neivgeeItuiKgueCueWtmOWcqO+8jOS9huS4jeS4gOWumuW3suiiq+aPkuWFpeaWh+aho+S4rSnjgIIKLy8gdW5iaW5k77ya5Y+q6LCD55So5LiA5qyh77yM5oyH5Luk5LiO5YWD57Sg6Kej57uR5pe26LCD55So44CCCi8vIOiuvue9ruihqOagvOmrmOW6pgp2YXIgZG9SZXNpemUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGVsLCBiaW5kaW5nLCB2bm9kZSkgewogICAgdmFyIF95aWVsZCR2bm9kZSwgJHRhYmxlLCB2YWx1ZSwgYm90dG9tT2Zmc2V0LCBtaW5IZWlnaHQsIHBhZ2VIZWlnaHQsIHRvdGFsSGVpZ2h0LCBoZWlnaHQ7CgogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHZub2RlOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgX3lpZWxkJHZub2RlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgJHRhYmxlID0gX3lpZWxkJHZub2RlLmNvbXBvbmVudEluc3RhbmNlOwogICAgICAgICAgICAvLyDojrflj5bosIPnlKjkvKDpgJLov4fmnaXnmoTmlbDmja4KICAgICAgICAgICAgdmFsdWUgPSBiaW5kaW5nLnZhbHVlOwoKICAgICAgICAgICAgaWYgKCR0YWJsZS5oZWlnaHQpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJlbC0kdGFibGUgbXVzdCBzZXQgdGhlIGhlaWdodC4gU3VjaCBhcyBoZWlnaHQ9JzEwMHB4JyIpOwoKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgaWYgKCEkdGFibGUuaGVpZ2h0LmluY2x1ZGVzKCdweCcpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAvLyDojrflj5bot53lupXpg6jot53nprvvvIjnlKjkuo7lsZXnpLrpobXnoIHnrYnkv6Hmga/vvIkKICAgICAgICAgICAgYm90dG9tT2Zmc2V0ID0gdmFsdWUgJiYgdmFsdWUuYm90dG9tT2Zmc2V0IHx8IDIwOwogICAgICAgICAgICBtaW5IZWlnaHQgPSA4MjsKICAgICAgICAgICAgcGFnZUhlaWdodCA9IHZhbHVlICYmIHZhbHVlLm5vUGFnZSA/IDAgOiBnZXRPZmZzZXRIKCd2cGFnZS1mb290ZXInKTsgLy8g5YiG6aG16auY5bqmCgogICAgICAgICAgICBpZiAoJHRhYmxlKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE2OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAvLyDorqHnrpfliJfooajpq5jluqblubborr7nva4KICAgICAgICAgICAgdG90YWxIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgLSBib3R0b21PZmZzZXQgLSBwYWdlSGVpZ2h0OwogICAgICAgICAgICBoZWlnaHQgPSB0b3RhbEhlaWdodCA8IG1pbkhlaWdodCA/IG1pbkhlaWdodCA6IHRvdGFsSGVpZ2h0OwogICAgICAgICAgICAkdGFibGUubGF5b3V0LnNldEhlaWdodChoZWlnaHQpOwogICAgICAgICAgICAkdGFibGUuZG9MYXlvdXQoKTsKCiAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIGRvUmVzaXplKF94LCBfeDIsIF94MykgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7IC8vIOiOt+WPlumhtemdouWFg+e0oOeahCBvZmZzZXRIZWlnaHQKCgpmdW5jdGlvbiBnZXRPZmZzZXRIKGlkKSB7CiAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkpIHsKICAgIHJldHVybiAwOwogIH0KCiAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS5vZmZzZXRIZWlnaHQ7Cn0KCmV4cG9ydCBkZWZhdWx0IHsKICAvLyDliJ3lp4vljJborr7nva4KICBiaW5kOiBmdW5jdGlvbiBiaW5kKGVsLCBiaW5kaW5nLCB2bm9kZSkgewogICAgLy8g6K6+572ucmVzaXpl55uR5ZCs5pa55rOVCiAgICBlbC5yZXNpemVMaXN0ZW5lciA9IC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gZG9SZXNpemUoZWwsIGJpbmRpbmcsIHZub2RlKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKTsgLy8g57uR5a6a55uR5ZCs5pa55rOV5YiwYWRkUmVzaXplTGlzdGVuZXIKICAgIC8vIGFkZFJlc2l6ZUxpc3RlbmVyKHdpbmRvdy5kb2N1bWVudC5ib2R5LCBlbC5yZXNpemVMaXN0ZW5lcikKCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZWwucmVzaXplTGlzdGVuZXIpOwogIH0sCiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoZWwsIGJpbmRpbmcsIHZub2RlKSB7CiAgICBkb1Jlc2l6ZShlbCwgYmluZGluZywgdm5vZGUpOwogIH0sCiAgLy8g57uR5a6a6buY6K6k6auY5bqmCiAgaW5zZXJ0ZWQ6IGZ1bmN0aW9uIGluc2VydGVkKGVsLCBiaW5kaW5nLCB2bm9kZSkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBkb1Jlc2l6ZShlbCwgYmluZGluZywgdm5vZGUpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTMpOwogICAgfSkpKCk7CiAgfSwKICAvLyDplIDmr4Hml7borr7nva4KICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZChlbCkgewogICAgLy8g56e76ZmkcmVzaXpl55uR5ZCsCiAgICAvLyByZW1vdmVSZXNpemVMaXN0ZW5lcihlbCwgZWwucmVzaXplTGlzdGVuZXIpCiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZWwucmVzaXplTGlzdGVuZXIpOwogIH0KfTs="},{"version":3,"sources":["D:/Microsoft VS Code/vs code/软件项目管理/大实例/前后端源码/front/src/directive/el-table/adaptive.js"],"names":["doResize","el","binding","vnode","$table","componentInstance","value","height","Error","includes","bottomOffset","minHeight","pageHeight","noPage","getOffsetH","totalHeight","window","innerHeight","getBoundingClientRect","top","layout","setHeight","doLayout","id","document","getElementById","offsetHeight","bind","resizeListener","addEventListener","update","inserted","unbind","removeEventListener"],"mappings":";;;;;AAAA;AACA;AACA;AAEA;AACA,IAAMA,QAAQ;AAAA,qEAAG,iBAAMC,EAAN,EAAUC,OAAV,EAAmBC,KAAnB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAILA,KAJK;;AAAA;AAAA;AAGMC,YAAAA,MAHN,gBAGbC,iBAHa;AAKf;AAEEC,YAAAA,KAPa,GAQXJ,OARW,CAObI,KAPa;;AAAA,gBAUVF,MAAM,CAACG,MAVG;AAAA;AAAA;AAAA;;AAAA,kBAWP,IAAIC,KAAJ,yDAXO;;AAAA;AAAA,iBAYJJ,MAAM,CAACG,MAAP,CAAcE,QAAd,CAAuB,IAAvB,CAZI;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAgBf;AACMC,YAAAA,YAjBS,GAiBOJ,KAAK,IAAIA,KAAK,CAACI,YAAhB,IAAiC,EAjBvC;AAmBTC,YAAAA,SAnBS,GAmBG,EAnBH;AAqBTC,YAAAA,UArBS,GAqBKN,KAAK,IAAIA,KAAK,CAACO,MAAhB,GAA0B,CAA1B,GAA8BC,UAAU,CAAC,cAAD,CArB5C,EAqB6D;;AArB7D,gBAuBVV,MAvBU;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAyBf;AACMW,YAAAA,WA1BS,GA0BKC,MAAM,CAACC,WAAP,GAAqBhB,EAAE,CAACiB,qBAAH,GAA2BC,GAAhD,GAAsDT,YAAtD,GAAqEE,UA1B1E;AA2BTL,YAAAA,MA3BS,GA2BAQ,WAAW,GAAGJ,SAAd,GAA0BA,SAA1B,GAAsCI,WA3BtC;AA6BfX,YAAAA,MAAM,CAACgB,MAAP,CAAcC,SAAd,CAAwBd,MAAxB;AACAH,YAAAA,MAAM,CAACkB,QAAP;;AA9Be;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAARtB,QAAQ;AAAA;AAAA;AAAA,GAAd,C,CAiCA;;;AACA,SAASc,UAAT,CAAoBS,EAApB,EAAwB;AACtB,MAAI,CAACC,QAAQ,CAACC,cAAT,CAAwBF,EAAxB,CAAL,EAAkC;AAAE,WAAO,CAAP;AAAU;;AAC9C,SAAOC,QAAQ,CAACC,cAAT,CAAwBF,EAAxB,EAA4BG,YAAnC;AACD;;AAED,eAAe;AACb;AACAC,EAAAA,IAFa,gBAER1B,EAFQ,EAEJC,OAFI,EAEKC,KAFL,EAEY;AACvB;AACAF,IAAAA,EAAE,CAAC2B,cAAH,wEAAoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACZ5B,QAAQ,CAACC,EAAD,EAAKC,OAAL,EAAcC,KAAd,CADI;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAApB,GAFuB,CAKvB;AACA;;AACAa,IAAAA,MAAM,CAACa,gBAAP,CAAwB,QAAxB,EAAkC5B,EAAE,CAAC2B,cAArC;AACD,GAVY;AAWbE,EAAAA,MAXa,kBAWN7B,EAXM,EAWFC,OAXE,EAWOC,KAXP,EAWc;AACzBH,IAAAA,QAAQ,CAACC,EAAD,EAAKC,OAAL,EAAcC,KAAd,CAAR;AACD,GAbY;AAcb;AACM4B,EAAAA,QAfO,oBAeE9B,EAfF,EAeMC,OAfN,EAeeC,KAff,EAesB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAC3BH,QAAQ,CAACC,EAAD,EAAKC,OAAL,EAAcC,KAAd,CADmB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAElC,GAjBY;AAkBb;AACA6B,EAAAA,MAnBa,kBAmBN/B,EAnBM,EAmBF;AACT;AACA;AACAe,IAAAA,MAAM,CAACiB,mBAAP,CAA2B,QAA3B,EAAqChC,EAAE,CAAC2B,cAAxC;AACD;AAvBY,CAAf","sourcesContent":["// bind：只调用一次，指令第一次绑定到元素时调用。在这里可以进行一次性的初始化设置。\r\n// inserted：被绑定元素插入父节点时调用 (仅保证父节点存在，但不一定已被插入文档中)。\r\n// unbind：只调用一次，指令与元素解绑时调用。\r\n\r\n// 设置表格高度\r\nconst doResize = async(el, binding, vnode) => {\r\n  // 获取表格Dom对象\r\n  const {\r\n    componentInstance: $table\r\n  } = await vnode\r\n  // 获取调用传递过来的数据\r\n  const {\r\n    value\r\n  } = binding\r\n\r\n  if (!$table.height) {\r\n    throw new Error(`el-$table must set the height. Such as height='100px'`)\r\n  } else if ($table.height.includes('px')) {\r\n    return\r\n  }\r\n\r\n  // 获取距底部距离（用于展示页码等信息）\r\n  const bottomOffset = (value && value.bottomOffset) || 20\r\n\r\n  const minHeight = 82\r\n\r\n  const pageHeight = (value && value.noPage) ? 0 : getOffsetH('vpage-footer') // 分页高度\r\n\r\n  if (!$table) return\r\n\r\n  // 计算列表高度并设置\r\n  const totalHeight = window.innerHeight - el.getBoundingClientRect().top - bottomOffset - pageHeight\r\n  const height = totalHeight < minHeight ? minHeight : totalHeight\r\n\r\n  $table.layout.setHeight(height)\r\n  $table.doLayout()\r\n}\r\n\r\n// 获取页面元素的 offsetHeight\r\nfunction getOffsetH(id) {\r\n  if (!document.getElementById(id)) { return 0 }\r\n  return document.getElementById(id).offsetHeight\r\n}\r\n\r\nexport default {\r\n  // 初始化设置\r\n  bind(el, binding, vnode) {\r\n    // 设置resize监听方法\r\n    el.resizeListener = async() => {\r\n      await doResize(el, binding, vnode)\r\n    }\r\n    // 绑定监听方法到addResizeListener\r\n    // addResizeListener(window.document.body, el.resizeListener)\r\n    window.addEventListener('resize', el.resizeListener)\r\n  },\r\n  update(el, binding, vnode) {\r\n    doResize(el, binding, vnode)\r\n  },\r\n  // 绑定默认高度\r\n  async inserted(el, binding, vnode) {\r\n    await doResize(el, binding, vnode)\r\n  },\r\n  // 销毁时设置\r\n  unbind(el) {\r\n    // 移除resize监听\r\n    // removeResizeListener(el, el.resizeListener)\r\n    window.removeEventListener('resize', el.resizeListener)\r\n  }\r\n}\r\n\r\n"]}]}