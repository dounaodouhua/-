{"remainingRequest":"D:\\Microsoft VS Code\\vs code\\软件项目管理\\大实例\\前后端源码\\front\\node_modules\\babel-loader\\lib\\index.js!D:\\Microsoft VS Code\\vs code\\软件项目管理\\大实例\\前后端源码\\front\\src\\api\\file.js","dependencies":[{"path":"D:\\Microsoft VS Code\\vs code\\软件项目管理\\大实例\\前后端源码\\front\\src\\api\\file.js","mtime":1741681637548},{"path":"D:\\Microsoft VS Code\\vs code\\软件项目管理\\大实例\\前后端源码\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Microsoft VS Code\\vs code\\软件项目管理\\大实例\\前后端源码\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgX3R5cGVvZiBmcm9tICJEOi9NaWNyb3NvZnQgVlMgQ29kZS92cyBjb2RlL1x1OEY2Rlx1NEVGNlx1OTg3OVx1NzZFRVx1N0JBMVx1NzQwNi9cdTU5MjdcdTVCOUVcdTRGOEIvXHU1MjREXHU1NDBFXHU3QUVGXHU2RTkwXHU3ODAxL2Zyb250L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YiOwppbXBvcnQgcmVxdWVzdCBmcm9tICdAL3V0aWxzL3JlcXVlc3QnOwpleHBvcnQgZGVmYXVsdCB7CiAgdXBsb2FkOiB1cGxvYWQsCiAgZGVsZXRlRmlsZTogZGVsZXRlRmlsZSwKICBkb3dubG9hZEZpbGU6IGRvd25sb2FkRmlsZSwKICBnZXRQcm9ncmVzc1BlcmNlbnQ6IGdldFByb2dyZXNzUGVyY2VudAp9Owp2YXIgbm93UHJvZ3Jlc3NQZXJjZW50ID0gMDsKLyoNCiAqIOaWh+S7tuS4iuS8oC3kuIrkvKDliLBwdWJsaWMNCiAqIEBwYXJhbSBmaWxlDQogKiBAcGFyYW0gdGFiTmFtZQ0KICogQHBhcmFtIHJlbElkcw0KICovCgpmdW5jdGlvbiB1cGxvYWQocGFyYW1zKSB7CiAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgT2JqZWN0LmtleXMocGFyYW1zKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgIGlmIChfdHlwZW9mKHBhcmFtc1trZXldKSA9PT0gJ29iamVjdCcpIHsKICAgICAgT2JqZWN0LmtleXMocGFyYW1zW2tleV0pLmZvckVhY2goZnVuY3Rpb24gKGtleXMpIHsKICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGVzJywgcGFyYW1zW2tleV1ba2V5c10pOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGZvcm1EYXRhLmFwcGVuZChrZXksIHBhcmFtc1trZXldKTsKICAgIH0KICB9KTsKICByZXR1cm4gcmVxdWVzdCh7CiAgICB1cmw6ICcvY29tbW9uL21pbmlvL3VwbG9hZCcsCiAgICBtZXRob2Q6ICdwb3N0JywKICAgIGRhdGE6IGZvcm1EYXRhLAogICAgb25VcGxvYWRQcm9ncmVzczogZnVuY3Rpb24gb25VcGxvYWRQcm9ncmVzcyhwcm9ncmVzc0V2ZW50KSB7CiAgICAgIG5vd1Byb2dyZXNzUGVyY2VudCA9IHByb2dyZXNzRXZlbnQubG9hZGVkIC8gcHJvZ3Jlc3NFdmVudC50b3RhbCAqIDk5IHwgMDsKICAgIH0KICB9KTsKfQoKZnVuY3Rpb24gZ2V0UHJvZ3Jlc3NQZXJjZW50KCkgewogIHJldHVybiBub3dQcm9ncmVzc1BlcmNlbnQ7Cn0KCmZ1bmN0aW9uIGRlbGV0ZUZpbGUoZmlsZUlkcykgewogIHJldHVybiByZXF1ZXN0LmRlbGV0ZSgiL2NvbW1vbi9taW5pby9kZWxldGVGaWxlP29zc0ZpbGVJZHM9Ii5jb25jYXQoZmlsZUlkcykpOwp9IC8vIG9zc+aWh+S7tua1geS4i+i9vW9zcy15a3QKCgpmdW5jdGlvbiBkb3dubG9hZEZpbGUoaWQsIGZpbGVTaXplKSB7CiAgcmV0dXJuIHJlcXVlc3QoewogICAgdXJsOiAnL2NvbW1vbi9taW5pby9kb3dubG9hZEZpbGUnLAogICAgbWV0aG9kOiAncG9zdCcsCiAgICBkYXRhOiB7CiAgICAgIGlkOiBpZAogICAgfSwKICAgIHJlc3BvbnNlVHlwZTogJ2Jsb2InLAogICAgb25Eb3dubG9hZFByb2dyZXNzOiBmdW5jdGlvbiBvbkRvd25sb2FkUHJvZ3Jlc3MocHJvZ3Jlc3MpIHsKICAgICAgbm93UHJvZ3Jlc3NQZXJjZW50ID0gTWF0aC5yb3VuZCgxMDAgKiBwcm9ncmVzcy5sb2FkZWQgLyBmaWxlU2l6ZSk7CiAgICB9CiAgfSk7Cn0="},{"version":3,"sources":["D:/Microsoft VS Code/vs code/软件项目管理/大实例/前后端源码/front/src/api/file.js"],"names":["request","upload","deleteFile","downloadFile","getProgressPercent","nowProgressPercent","params","formData","FormData","Object","keys","forEach","key","append","url","method","data","onUploadProgress","progressEvent","loaded","total","fileIds","delete","id","fileSize","responseType","onDownloadProgress","progress","Math","round"],"mappings":";;;;AAAA,OAAOA,OAAP,MAAoB,iBAApB;AAEA,eAAe;AACbC,EAAAA,MAAM,EAANA,MADa;AAEbC,EAAAA,UAAU,EAAVA,UAFa;AAGbC,EAAAA,YAAY,EAAZA,YAHa;AAIbC,EAAAA,kBAAkB,EAAlBA;AAJa,CAAf;AAOA,IAAIC,kBAAkB,GAAG,CAAzB;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASJ,MAAT,CAAgBK,MAAhB,EAAwB;AACtB,MAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACAC,EAAAA,MAAM,CAACC,IAAP,CAAYJ,MAAZ,EAAoBK,OAApB,CAA4B,UAAAC,GAAG,EAAI;AACjC,QAAI,QAAQN,MAAM,CAACM,GAAD,CAAd,MAAyB,QAA7B,EAAuC;AACrCH,MAAAA,MAAM,CAACC,IAAP,CAAYJ,MAAM,CAACM,GAAD,CAAlB,EAAyBD,OAAzB,CAAiC,UAAAD,IAAI,EAAI;AACvCH,QAAAA,QAAQ,CAACM,MAAT,CAAgB,OAAhB,EAAyBP,MAAM,CAACM,GAAD,CAAN,CAAYF,IAAZ,CAAzB;AACD,OAFD;AAGD,KAJD,MAIO;AACLH,MAAAA,QAAQ,CAACM,MAAT,CAAgBD,GAAhB,EAAqBN,MAAM,CAACM,GAAD,CAA3B;AACD;AACF,GARD;AASA,SAAOZ,OAAO,CAAC;AACbc,IAAAA,GAAG,EAAE,sBADQ;AAEbC,IAAAA,MAAM,EAAE,MAFK;AAGbC,IAAAA,IAAI,EAAET,QAHO;AAIbU,IAAAA,gBAAgB,EAAE,0BAAAC,aAAa,EAAI;AACjCb,MAAAA,kBAAkB,GAAIa,aAAa,CAACC,MAAd,GAAuBD,aAAa,CAACE,KAArC,GAA6C,EAA7C,GAAkD,CAAxE;AACD;AANY,GAAD,CAAd;AAQD;;AAED,SAAShB,kBAAT,GAA8B;AAC5B,SAAOC,kBAAP;AACD;;AAED,SAASH,UAAT,CAAoBmB,OAApB,EAA6B;AAC3B,SAAOrB,OAAO,CAACsB,MAAR,+CAAsDD,OAAtD,EAAP;AACD,C,CAED;;;AACA,SAASlB,YAAT,CAAsBoB,EAAtB,EAA0BC,QAA1B,EAAoC;AAClC,SAAOxB,OAAO,CAAC;AACbc,IAAAA,GAAG,EAAE,4BADQ;AAEbC,IAAAA,MAAM,EAAE,MAFK;AAGbC,IAAAA,IAAI,EAAE;AAAEO,MAAAA,EAAE,EAAEA;AAAN,KAHO;AAIbE,IAAAA,YAAY,EAAE,MAJD;AAKbC,IAAAA,kBALa,8BAKMC,QALN,EAKgB;AAC3BtB,MAAAA,kBAAkB,GAAGuB,IAAI,CAACC,KAAL,CAAW,MAAMF,QAAQ,CAACR,MAAf,GAAwBK,QAAnC,CAArB;AACD;AAPY,GAAD,CAAd;AASD","sourcesContent":["import request from '@/utils/request'\r\n\r\nexport default {\r\n  upload,\r\n  deleteFile,  \r\n  downloadFile,\r\n  getProgressPercent\r\n}\r\n\r\nvar nowProgressPercent = 0\r\n/*\r\n * 文件上传-上传到public\r\n * @param file\r\n * @param tabName\r\n * @param relIds\r\n */\r\nfunction upload(params) {\r\n  const formData = new FormData()    \r\n  Object.keys(params).forEach(key => {\r\n    if (typeof (params[key]) === 'object') {\r\n      Object.keys(params[key]).forEach(keys => {        \r\n        formData.append('files', params[key][keys])\r\n      })\r\n    } else {\r\n      formData.append(key, params[key])      \r\n    }\r\n  })  \r\n  return request({\r\n    url: '/common/minio/upload',\r\n    method: 'post',\r\n    data: formData,\r\n    onUploadProgress: progressEvent => {\r\n      nowProgressPercent = (progressEvent.loaded / progressEvent.total * 99 | 0)\r\n    }\r\n  })\r\n}\r\n\r\nfunction getProgressPercent() {\r\n  return nowProgressPercent\r\n}\r\n\r\nfunction deleteFile(fileIds) {\r\n  return request.delete(`/common/minio/deleteFile?ossFileIds=${fileIds}`)\r\n}\r\n\r\n// oss文件流下载oss-ykt\r\nfunction downloadFile(id, fileSize) {\r\n  return request({\r\n    url: '/common/minio/downloadFile',\r\n    method: 'post',\r\n    data: { id: id },\r\n    responseType: 'blob',\r\n    onDownloadProgress(progress) {\r\n      nowProgressPercent = Math.round(100 * progress.loaded / fileSize)\r\n    }\r\n  })  \r\n}\r\n\r\n"]}]}